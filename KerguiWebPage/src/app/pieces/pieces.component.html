<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


<body>
    <div class="main">
        <div class="sidebar">
            <!-- Contenu de la barre latérale -->
             <app-sidebar></app-sidebar>
        </div>
    
        <div class="content">
            <div class="searchBar">
                <!-- Barre de recherche -->
                <app-search-bar></app-search-bar>
            </div>
        
            <div class="contenu">
                <div class="pieces">
                    <h2>Pièces</h2>
                    <div class="card1">
                        <div class="card-piece mt-2 mt-xxl-3">
                            <div class="en-tete">
                                <i class="ajout fa-solid fa-circle-plus"></i>
                                <p>Ajouter une pièce</p>
                            </div>
                            <!-- Boucle *ngFor pour afficher les pièces -->
                            <div class="ensemble">
                                <div class="details_piece" *ngFor="let piece of pieces; let i = index" (click)="onPieceClick(i)" [ngStyle]="{'background-color': selectedPieceIndex === i ? '#D0E3FF' : '#FFFFFF'}">
                                    <div class="contenu-piece">
                                        <img [src]="piece.imgUrl" alt="{{ piece.nom_piece }}">
                                        <div class="piece">
                                            <h3>{{ piece.nom_piece }}</h3>
                                            <p>{{ piece.surface }}</p>
                                        </div>
                                    </div>
                                    <i class="icone-option fa-solid fa-ellipsis"></i>
                                </div>
                            </div>
                            
                        </div>

                        <!-- Carte pour afficher les appareils -->
                        <div class="card-appareils mt-2 mt-xxl-3">
                            <div class="en-tete">
                                <i class="ajout fa-solid fa-circle-plus"></i>
                                <p>Ajouter un appareil</p>
                            </div>
                            <!-- Boucle *ngFor pour afficher les appareils -->
                            <div class="ensemble">
                                <div class="details_piece" *ngFor="let appareil of appareils">
                                    <div class="contenu-piece">
                                        <img [src]="appareil.imgUrl" alt="{{ appareil.nom_appareil }}">
                                        <div class="piece">
                                            <h3>{{ appareil.nom_appareil }}</h3>
                                            <p>{{ appareil.nom_piece }}</p>
                                        </div>
                                    </div>
                                    <i class="icone-delete fa-solid fa-trash"></i>
                                </div>
                            </div>
                        </div>
                    </div>  
                    
                    <div class="card2 mt-2 mt-xxl-3">
                        <div class="en-tete py-0 my-0">
                            <p class="py-1">Wa Keur Gui</p>
                        </div>
                        <div class="membres pb-2 pt-0 me-4 my-0">
                            <div class="boucle my-0 pt-1" *ngFor="let user of users">
                                <div class="user py-1">
                                    <img [src]="user.profile_user" alt="{{ user.nom_user }}">
                                    <div class="user_detail">
                                        <h3>{{ user.nom_user }}</h3>
                                        <p>{{ user.mail_user }}</p>
                                    </div>  
                                </div>
                                <i class="icone-delete fa-solid fa-trash"></i>
                            </div>
                            
                        </div>
                    </div>
                </div>
                
                <div class="historique me-3" *ngIf="!showHistoriquePiece" >
                    <!-- Historique des consommations -->
                </div>
                <div class="historiquePiece me-3" *ngIf="showHistoriquePiece">
                    <h2 class="mt-3 mt-xxl-5 text-center fw-bold">{{ selectedPiece?.nom_piece }}</h2>  
                    <img [src]="selectedPiece?.imgUrl" alt="{{ selectedPiece?.nom_piece }}">
                    <div class="consommation mt-3 mt-xxl-4" *ngFor="let consommation of consommations">
                        <div class="details_cons pt-1 ps-3">
                            <div class="type_cons">
                                <i class="circle pt-2 mt-1 fa-solid fa-circle"></i>
                                <p>{{ consommation.type_consommation }}</p>
                            </div>
                            <div class="cons align-items-start pb-1">
                                <p class="pt-2">Vous avez consommé:</p>
                                <div class="energie pt-2 pe-0 ms-4 text-right">
                                    <div class="cout_energetique">
                                        {{ consommation.cout_energetique }}
                                    </div>
                                    <div class="pourcentage mb-1">
                                        <i class="arrow-up fa-solid fa-arrow-trend-up"></i>
                                        <span>{{ consommation.pourcentage }}</span>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
